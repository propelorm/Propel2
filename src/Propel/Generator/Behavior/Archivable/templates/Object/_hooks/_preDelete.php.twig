{% if behavior.archiveOnDelete %}
    {% if builder.generatorConfig.buildProperty('addHooks') %}
        if ($ret) {
            if ($this->archiveOnDelete) {
                // do nothing yet. The object will be archived later when calling {{ builder.queryClassName }}::delete().
            } else {
                $deleteQuery->setArchiveOnDelete(false);
                $this->archiveOnDelete = true;
            }
        }
    {% else %}
        if ($this->archiveOnDelete) {
            // do nothing yet. The object will be archived later when calling {{ builder.queryClassName }}::delete().
        } else {
            $deleteQuery->setArchiveOnDelete(false);
            $this->archiveOnDelete = true;
        }
    {% endif %}
{% endif %}